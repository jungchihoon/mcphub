# 사용자 개인 그룹 기능 (User Personal Groups)

## 🎯 **기능 개요**

사용자가 MCPHub에 연결된 MCP 서버들을 개인적으로 그룹화하여, Cursor IDE에서 필요한 서버들만 선택적으로 사용할 수 있도록 하는 기능입니다.

## 📋 **핵심 요구사항**

### 1. **사용자별 개인 그룹 관리**
- 각 사용자가 자신만의 그룹을 생성/수정/삭제 가능
- 그룹 정보는 사용자별로 DB에 저장
- 다른 사용자와 그룹 공유 불가 (개인 전용)

### 2. **그룹별 MCP 서버 필터링**
- 사용자가 그룹에 포함시킨 MCP 서버들만 Cursor에 노출
- 그룹에 포함되지 않은 서버는 Cursor에서 보이지 않음
- 그룹별로 툴 목록이 동적으로 필터링됨

### 3. **기본 동작 (그룹 없음)**
- 사용자가 그룹을 생성하지 않은 경우
- MCPHub에 등록된 모든 MCP 서버가 Cursor에 노출
- 기존 동작과 동일

## 🏗 **기술적 구현 계획**

### **데이터베이스 스키마**

#### **UserGroup 엔티티**
```typescript
interface UserGroup {
  id: string;           // UUID
  userId: string;       // User 엔티티 참조
  name: string;         // 그룹 이름
  description?: string; // 그룹 설명 (선택사항)
  servers: string[];    // 포함된 MCP 서버 이름 배열
  isActive: boolean;    // 활성화 상태
  createdAt: Date;      // 생성 시간
  updatedAt: Date;      // 수정 시간
}
```

### **API 엔드포인트**

#### **그룹 관리**
- `GET /api/user/groups` - 사용자의 모든 그룹 조회
- `POST /api/user/groups` - 새 그룹 생성
- `PUT /api/user/groups/:groupId` - 그룹 수정
- `DELETE /api/user/groups/:groupId` - 그룹 삭제

#### **MCP 연결**
- `GET /mcp` - 기본 연결 (모든 서버)
- `GET /mcp/user/:userId/groups/:groupId` - 특정 그룹으로 연결

### **프론트엔드 UI**

#### **그룹 관리 페이지**
- 그룹 목록 표시
- 새 그룹 생성 폼
- 그룹별 MCP 서버 선택/해제
- 그룹 활성화/비활성화 토글

#### **MCP 서버 선택 UI**
- 체크박스로 서버 선택
- 서버별 툴 개수 표시
- 실시간 미리보기

## 🔄 **사용자 플로우**

### **1. 그룹 생성 플로우**
```
사용자 로그인
    ↓
그룹 관리 페이지 접근
    ↓
"새 그룹 생성" 클릭
    ↓
그룹 이름, 설명 입력
    ↓
MCP 서버 선택 (체크박스)
    ↓
그룹 저장
    ↓
DB에 UserGroup 저장
```

### **2. Cursor 연결 플로우**
```
사용자가 Cursor에서 MCPHub 연결
    ↓
사용자 인증 (MCPHub Key)
    ↓
사용자의 활성 그룹 확인
    ↓
그룹이 있으면: 그룹 내 서버만 노출
그룹이 없으면: 모든 서버 노출
    ↓
Cursor에 툴 목록 전달
```

## 🎨 **UI/UX 설계**

### **그룹 관리 페이지**
```
┌─────────────────────────────────────┐
│ 내 MCP 서버 그룹 관리                │
├─────────────────────────────────────┤
│ [새 그룹 만들기] [+ 그룹 추가]       │
├─────────────────────────────────────┤
│ 📁 개발용 그룹 (활성)               │
│    └─ GitHub PR MCP (6개 툴)        │
│    └─ mcp-atlassian (42개 툴)       │
│ [수정] [삭제] [비활성화]            │
├─────────────────────────────────────┤
│ 📁 문서작업용 그룹                  │
│    └─ mcp-atlassian (42개 툴)       │
│ [수정] [삭제] [활성화]              │
└─────────────────────────────────────┘
```

### **그룹 생성/수정 모달**
```
┌─────────────────────────────────────┐
│ 새 그룹 만들기                       │
├─────────────────────────────────────┤
│ 그룹 이름: [개발용]                  │
│ 설명: [개발 관련 MCP 서버들]         │
├─────────────────────────────────────┤
│ MCP 서버 선택:                      │
│ ☑️ GitHub PR MCP (ACA) - 6개 툴     │
│ ☑️ mcp-atlassian - 42개 툴          │
│ ☐ jira-azure - 0개 툴               │
│ ☐ test - 0개 툴                     │
├─────────────────────────────────────┤
│ [취소] [저장]                       │
└─────────────────────────────────────┘
```

## 🔧 **구현 단계**

### **Phase 1: 데이터베이스 및 백엔드**
1. UserGroup 엔티티 생성
2. UserGroupRepository 구현
3. 그룹 관리 API 엔드포인트 구현
4. MCP 연결 시 그룹 필터링 로직 구현

### **Phase 2: 프론트엔드 UI**
1. 그룹 관리 페이지 컴포넌트 생성
2. 그룹 생성/수정 모달 구현
3. MCP 서버 선택 UI 구현
4. 그룹 목록 표시 컴포넌트

### **Phase 3: 통합 및 테스트**
1. 백엔드-프론트엔드 통합
2. Cursor 연결 테스트
3. 그룹별 툴 필터링 테스트
4. 사용자별 격리 테스트

## 🚀 **기대 효과**

1. **개발자 경험 향상**: 필요한 툴만 선택적으로 사용
2. **Cursor 성능 개선**: 불필요한 툴 제거로 로딩 속도 향상
3. **개인화**: 사용자별 맞춤형 MCP 서버 구성
4. **관리 효율성**: 툴 개수 제한으로 혼란 방지

---

**작성일**: 2025-08-01  
**작성자**: MCPHub 개발팀  
**버전**: 1.0.0 