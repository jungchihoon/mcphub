# MCPHub v2.1.0 릴리즈 노트

**릴리즈 일자**: 2025-08-01  
**버전**: v2.1.0  
**브랜치**: `feature/frontend-backend-separation`

---

## 🚀 **주요 개선사항**

### **1. 프론트엔드/백엔드 완전 분리**
- 백엔드(포트 3000): API + MCP endpoint만 제공
- 프론트엔드(포트 5173): React SPA 독립 실행
- 개발 환경에서 `concurrently`로 동시 실행 지원
- 운영 환경에서 완전 독립 배포 가능

### **2. MCP 프로토콜 표준 완전 준수**
- `/mcp` endpoint만 사용 (커스텀 path 제거)
- 쿼리 파라미터 인증: `http://localhost:3000/mcp?key=YOUR_KEY`
- 헤더 기반 인증 하위 호환성 유지
- Cursor IDE 완벽 호환성 확보

### **3. CORS 및 프록시 시스템 구축**
- CORS 미들웨어 추가 (프론트엔드 5173 포트 허용)
- Vite 개발 서버 프록시 설정 완료
- 개발/운영 환경 분리된 설정 파일

---

## 🛠 **기술적 변경사항**

### **백엔드 변경사항**
```typescript
// 정적 파일 서빙 완전 제거
// this.findAndServeFrontend(); // 제거됨

// CORS 미들웨어 추가
app.use(cors({
  origin: ['http://localhost:5173', 'http://localhost:3001'],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  allowedHeaders: ['Content-Type', 'Authorization', 'x-auth-token', 'Accept']
}));

// MCP endpoint 표준화
app.post('/mcp', handleMcpPostRequest);  // /mcp만 사용
```

### **프론트엔드 변경사항**
```typescript
// vite.config.ts - 프록시 설정
server: {
  port: 5173,
  proxy: {
    '/api': 'http://localhost:3000',
    '/auth': 'http://localhost:3000',
    '/mcp': 'http://localhost:3000'
  }
}
```

### **환경변수 분리**
```bash
# frontend/.env.development
VITE_API_BASE_URL=http://localhost:3000
VITE_MCP_ENDPOINT_URL=http://localhost:3000/mcp
VITE_FRONTEND_URL=http://localhost:5173

# frontend/.env.production
VITE_API_BASE_URL=
VITE_MCP_ENDPOINT_URL=/mcp
```

---

## 📋 **새로운 사용 방법**

### **개발 환경**
```bash
# 프론트엔드 + 백엔드 동시 실행
pnpm run dev

# 개별 실행
pnpm backend:dev    # 백엔드만 (포트 3000)
pnpm frontend:dev   # 프론트엔드만 (포트 5173)
```

### **Cursor IDE 설정 (새로운 표준 방식)**
```json
{
  "mcpServers": {
    "mcp-hub": {
      "type": "streamable-http",
      "url": "http://localhost:3000/mcp?key=YOUR_MCPHUB_KEY",
      "headers": {
        "Connection": "keep-alive",
        "Content-Type": "application/json"
      }
    }
  }
}
```

### **기존 헤더 방식 (하위 호환성)**
```json
{
  "mcpServers": {
    "mcp-hub": {
      "type": "streamable-http", 
      "url": "http://localhost:3000/mcp",
      "headers": {
        "Authorization": "Bearer YOUR_MCPHUB_KEY",
        "Connection": "keep-alive",
        "Content-Type": "application/json"
      }
    }
  }
}
```

---

## ✅ **테스트 결과**

### **기능 테스트**
- ✅ 백엔드 API: `http://localhost:3000/api/health`
- ✅ MCP endpoint: `http://localhost:3000/mcp?key=...`
- ✅ 프론트엔드: `http://localhost:5173`
- ✅ API 프록시: `http://localhost:5173/api/health`

### **인증 테스트**
- ✅ 쿼리 파라미터 인증 정상 동작
- ✅ 헤더 기반 인증 하위 호환성 유지
- ✅ MCPHub Key 검증 정상 동작

### **CORS 테스트**
- ✅ 프론트엔드에서 백엔드 API 호출 성공
- ✅ OPTIONS preflight 요청 정상 처리
- ✅ 크로스 오리진 요청 정상 동작

---

## 🚨 **주의사항**

### **1. Cursor IDE 설정 업데이트 필요**
기존 사용자는 Cursor IDE 설정을 새로운 방식으로 업데이트해야 합니다:
- 기존: `http://localhost:3000/mcp/user/YOUR_KEY`
- 신규: `http://localhost:3000/mcp?key=YOUR_KEY`

### **2. 개발 환경 변경**
- 프론트엔드: `http://localhost:5173`
- 백엔드: `http://localhost:3000`
- 두 서버 모두 실행되어야 정상 동작

### **3. 환경변수 설정**
새로운 환경변수 파일들이 추가되었습니다:
- `frontend/.env.development`
- `frontend/.env.production`

---

## 🔧 **알려진 이슈**

### **TypeORM 에러**
```
ColumnTypeUndefinedError: Column type for UserGroup#name is not defined
```
- **원인**: `UserGroup` 엔티티의 타입 정의 누락
- **해결 예정**: 다음 패치에서 수정
- **임시 해결**: 백엔드 재시작 시 일시적으로 발생할 수 있음

---

## 📈 **성능 개선**

1. **분리된 개발 환경**: HMR(Hot Module Replacement) 최적화
2. **독립적 스케일링**: 프론트엔드/백엔드 개별 확장 가능
3. **네트워크 최적화**: CORS 및 프록시를 통한 효율적인 통신
4. **빌드 최적화**: 각각 독립적인 빌드 프로세스

---

## 🛣 **향후 계획**

### **v2.1.1 (다음 패치)**
- [ ] TypeORM `UserGroup` 엔티티 에러 수정
- [ ] Cursor IDE 연결 테스트 및 검증
- [ ] 추가 CORS 정책 최적화

### **v2.2.0 (향후 기능)**
- [ ] Nginx 설정 가이드 및 Docker 업데이트
- [ ] 운영 환경 배포 자동화
- [ ] 모니터링 대시보드 추가

---

## 👥 **기여자**
- **개발**: Assistant + 사용자
- **테스트**: 사용자
- **문서화**: Assistant

---

**이번 릴리즈로 MCPHub가 MCP 프로토콜 표준을 완전히 준수하며, 확장 가능한 현대적 아키텍처로 발전했습니다!** 🎉